# n8n-nodes-canva

<p align="center"><br>
Este Community Node Ã© uma soluÃ§Ã£o 100% gratuita, criada com o intuito de simplificar e auxiliar toda a comunidade a integrar e utilizar ao mÃ¡ximo os principais recursos oferecidos pela <b>Canva Connect API</b> em seus projetos no N8N.
</p>
<br>
	
<div align="center">
  <img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fapi.npmjs.org%2Fdownloads%2Fpoint%2Flast-year%2Fn8n-nodes-canva&query=downloads&style=for-the-badge&label=Total%20de%20Downloads&labelColor=%230d1117&color=%23359514&cacheSeconds=30&link=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fn8n-nodes-agendor" alt="Downloads Badge">
  <img src="https://img.shields.io/npm/v/n8n-nodes-canva?style=for-the-badge&label=VersÃ£o&labelColor=%230d1117&color=%23007ACC" alt="Version Badge">
  <img src="https://img.shields.io/npm/l/n8n-nodes-canva?style=for-the-badge&label=LicenÃ§a&labelColor=%230d1117&color=%23FFA500" alt="License Badge">
</div>
<br>

<p align="center">
  <a href="mailto:contato@lumiaria.com.br"><img src="https://img.shields.io/badge/Email-Suporte-red?style=for-the-badge&logo=gmail&logoColor=white" alt="Email"></a>     
  <a href="https://github.com/ramonmatias19/n8n-nodes-canva"><img src="https://img.shields.io/badge/GitHub-RepositÃ³rio-black?style=for-the-badge&logo=github&logoColor=white" alt="GitHub"></a>     
  <a href="https://www.npmjs.com/package/n8n-nodes-canva"><img src="https://img.shields.io/badge/NPM-Package-red?style=for-the-badge&logo=npm&logoColor=white" alt="NPM"></a>
</p>

> **Aviso:** Este node foi desenvolvido de forma independente para facilitar integraÃ§Ãµes com a API pÃºblica da Canva no n8n.  
> NÃ£o Ã© afiliado, endossado ou mantido pela Canva Pty Ltd.  
> Todas as marcas citadas pertencem aos seus respectivos proprietÃ¡rios.

<h1></h1>

<h3>âš™ï¸ Requisitos</h3>

Para utilizar o nosso **Community Node**, Ã© necessÃ¡rio atender aos seguintes requisitos:  
- **N8N** na versÃ£o **1.54.4** ou superior  
- **Node.js** na versÃ£o **16.0.0** ou superior  
- **Conta ativa** na **Canva** com acesso Ã  Connect API  
- **Application registrada** no [Canva Developer Portal](https://www.canva.dev/)

<h1></h1>

<h3>ğŸ“Œ Recursos DisponÃ­veis</h3>

<h3>ğŸ¨ Designs</h3>
âœ¨ Este recurso oferece acesso completo Ã s principais funcionalidades relacionadas ao gerenciamento de designs no Canva. Ele permite criar novos projetos, buscar designs existentes, listar seus trabalhos e gerenciar todo o ciclo de vida dos designs de forma prÃ¡tica e eficiente.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Criar Design</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Buscar Design</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Listar Designs</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Tipos Suportados</b></summary>
	</details>
</details>

<h3>ğŸ“¤ ExportaÃ§Ãµes</h3>
ğŸ”„ Com este recurso, vocÃª conta com funcionalidades completas para exportar seus designs em diferentes formatos. Ele abrange desde a criaÃ§Ã£o de jobs de exportaÃ§Ã£o atÃ© o monitoramento do status de processamento, permitindo obter seus arquivos finalizados nos formatos PDF, PNG, JPG e MP4.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Criar Job de ExportaÃ§Ã£o</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Verificar Status da ExportaÃ§Ã£o</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Formatos PDF</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Formatos PNG/JPG</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Formatos MP4</b></summary>
	</details>
</details>

<h3>ğŸ“ Pastas</h3>
ğŸ—‚ï¸ Este recurso disponibiliza ferramentas essenciais para organizaÃ§Ã£o e gerenciamento de pastas no Canva. Com ele, Ã© possÃ­vel criar novas pastas, organizar seus designs de forma estruturada e manter um workspace organizado para melhor produtividade.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Criar Pasta</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Listar Pastas</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Organizar ConteÃºdo</b></summary>
	</details>
</details>

<h3>ğŸ–¼ï¸ Assets</h3>
ğŸ“· Com este recurso, vocÃª tem acesso ao gerenciamento de assets e elementos visuais no Canva. Ele permite buscar assets especÃ­ficos, listar elementos disponÃ­veis e gerenciar recursos visuais para seus projetos de forma eficiente.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Buscar Asset</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Listar Assets</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Gerenciar Recursos</b></summary>
	</details>
</details>

<h3>ğŸ‘¤ UsuÃ¡rios</h3>
ğŸ” Este recurso oferece funcionalidades para gerenciamento de informaÃ§Ãµes de usuÃ¡rio e perfil. Com ele, Ã© possÃ­vel obter dados do usuÃ¡rio atual, verificar permissÃµes e acessar informaÃ§Ãµes de conta de forma segura.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Obter Perfil</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Verificar PermissÃµes</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> InformaÃ§Ãµes da Conta</b></summary>
	</details>
</details>

<h3>ğŸ”” Webhooks</h3>
ğŸ“¡ Este recurso oferece funcionalidades completas para receber notificaÃ§Ãµes em tempo real de eventos do Canva atravÃ©s de webhooks. Com ele, vocÃª pode monitorar criaÃ§Ã£o de designs, atualizaÃ§Ãµes, exportaÃ§Ãµes concluÃ­das e outros eventos importantes, permitindo automaÃ§Ãµes instantÃ¢neas baseadas nas atividades da sua conta.
<br>
<details>
  <summary><b>Lista de operaÃ§Ãµes</b></summary>
	<details>
  	<summary>   âœ… <b> Design Criado</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Design Atualizado</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> ExportaÃ§Ã£o ConcluÃ­da</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Asset Eventos</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Pasta Eventos</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> ComentÃ¡rio Eventos</b></summary>
	</details>
	<details>
  	<summary>   âœ… <b> Filtros Personalizados</b></summary>
	</details>
</details>

<h1></h1>

<h3>ğŸš€ InstalaÃ§Ã£o</h3>

**Via n8n Community Nodes:**
1. Abra sua instÃ¢ncia do n8n
2. VÃ¡ para **Settings** â†’ **Community Nodes**
3. Instale o pacote: `n8n-nodes-canva`
4. Reinicie o n8n

**Via NPM:**
```bash
npm install n8n-nodes-canva
```

### ğŸ”‘ ConfiguraÃ§Ã£o de Credenciais

Este node agora usa **OAuth 2.0 nativo do n8n** para autenticaÃ§Ã£o automÃ¡tica:

1. **Crie uma integraÃ§Ã£o no [Canva Developer Portal](https://www.canva.com/developers/)**
   - FaÃ§a login no Developer Portal
   - Ative a MFA (Multi-Factor Authentication) se necessÃ¡rio
   - VÃ¡ para "Your Integrations" e clique em "Create an integration"
   - Escolha entre integraÃ§Ã£o "Public" ou "Private"

2. **Configure sua integraÃ§Ã£o:**
   - Defina um nome para sua integraÃ§Ã£o
   - **Copie o Client ID** (serÃ¡ necessÃ¡rio no n8n)
   - **Gere e salve o Client Secret** (serÃ¡ necessÃ¡rio no n8n)
   - **IMPORTANTE**: Copie a URL de redirecionamento OAuth: `[YOUR-URL-BASE]/rest/oauth2-credential/callback`

3. **âš ï¸ CONFIGURAÃ‡ÃƒO CRÃTICA DE SCOPES:**
   
   **ATENÃ‡ÃƒO**: Para evitar o erro `"invalid_scope"`, vocÃª DEVE habilitar TODOS os scopes listados abaixo na seÃ§Ã£o [Scopes](https://www.canva.com/developers/integrations/connect-api/) da sua integraÃ§Ã£o:
   
   ```
   app:read
   app:write
   asset:read
   asset:write
   brandtemplate:content:read
   brandtemplate:meta:read
   comment:read
   comment:write
   design:content:read
   design:content:write
   design:meta:read
   design:permission:read
   design:permission:write
   folder:read
   folder:write
   folder:permission:read
   folder:permission:write
   profile:read
   ```
   
   > **ğŸš¨ IMPORTANTE**: Marque/habilite **TODOS** os 18 scopes acima na sua integraÃ§Ã£o do Canva Developer Portal. Se qualquer scope estiver faltando, vocÃª receberÃ¡ o erro `"invalid_scope"` durante a autenticaÃ§Ã£o OAuth.

4. **No n8n, crie uma nova credencial "Canva API":**
   - **Client ID**: Cole o Client ID obtido no Developer Portal
   - **Client Secret**: Cole o Client Secret gerado no Developer Portal
   - Clique em **"Connect my account"** para iniciar o fluxo OAuth
   - Autorize a aplicaÃ§Ã£o na tela do Canva
   - âœ… **Pronto!** O n8n gerenciarÃ¡ automaticamente tokens e renovaÃ§Ãµes

5. **ğŸ¯ Vantagens do OAuth Nativo:**
   - âœ… **ConfiguraÃ§Ã£o simplificada** - Apenas Client ID e Secret
   - âœ… **RenovaÃ§Ã£o automÃ¡tica** - n8n gerencia refresh tokens
   - âœ… **SeguranÃ§a aprimorada** - Sem tokens manuais expostos
   - âœ… **Fluxo padrÃ£o** - Mesma experiÃªncia de outros nodes n8n

> **MigraÃ§Ã£o**: Se vocÃª usava versÃµes anteriores com Access Token manual, delete a credencial antiga e crie uma nova seguindo os passos acima.

### ğŸ“¡ ConfiguraÃ§Ã£o de Webhooks

Para usar o **Canva Trigger**:

1. Adicione o node **Canva Trigger** ao seu workflow
2. Configure os eventos que deseja escutar
3. Ative o workflow
4. O webhook serÃ¡ automaticamente registrado no Canva
5. Quando desativar o workflow, o webhook serÃ¡ removido automaticamente

### ğŸš¨ Troubleshooting - Erro "invalid_scope"

**Problema**: Durante a autenticaÃ§Ã£o OAuth, vocÃª recebe o erro:
```
Error: Insufficient parameters for OAuth2 callback.
Received following query parameters: {"error":"invalid_scope","error_description":"Requested scopes are not allowed for this client."}
```

**SoluÃ§Ã£o**: 
1. Acesse sua integraÃ§Ã£o no [Canva Developer Portal](https://www.canva.com/developers/apps)
2. VÃ¡ para a seÃ§Ã£o **"Your integrations"** > **"Create an integration"**
3. VÃ¡ para a seÃ§Ã£o **"Scopes"** da sua integraÃ§Ã£o
4. **Marque/habilite TODOS os 18 scopes** listados na seÃ§Ã£o de configuraÃ§Ã£o acima
5. Salve as alteraÃ§Ãµes
6. Tente a conexÃ£o OAuth novamente no n8n

> **Causa**: Este erro ocorre quando a aplicaÃ§Ã£o OAuth2 no Canva nÃ£o estÃ¡ configurada com todos os scopes que o n8n-nodes-canva precisa para funcionar corretamente.

<h1></h1>

<h3>ğŸ¤ ContribuiÃ§Ã£o</h3>

Contribua para o crescimento deste projeto! VocÃª pode ajudar de diversas formas:  
- **Pull Requests**: Envie melhorias, correÃ§Ãµes ou novas funcionalidades.  
- **Issues**: Relate problemas ou sugira novas ideias.  
- **SugestÃµes**: Compartilhe suas opiniÃµes e feedbacks.  
- **DocumentaÃ§Ã£o**: Ajude a melhorar ou expandir a documentaÃ§Ã£o existente.  

<h1></h1>

<p align="center">
Desenvolvido com â¤ï¸ por <b>Ramon Matias</b>
</p> 